<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0f14" />
  <title>GxMods Admin – Mobile</title>
  <style>
    /* ===== Reset ringan */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,"Noto Sans",Arial,sans-serif;background:#0b0f14;color:#e6edf3;-webkit-tap-highlight-color:transparent}
    img,svg,canvas{max-width:100%;display:block}
    button,input,select,textarea{font:inherit;color:inherit}
    a{color:inherit;text-decoration:none}
    :root{
      --bg:#0b0f14;
      --card:#111826;
      --card-2:#0e1420;
      --text:#e6edf3;
      --muted:#a2b2c2;
      --accent:#6ccaff;
      --accent-2:#7f5af0;
      --border:#1b2433;
      --ok:#19c37d;
      --warn:#ffb020;
      --bad:#ff5d5d;
      --radius:16px;
      --shadow:0 6px 24px rgba(0,0,0,.25), 0 1px 0 rgba(255,255,255,.02) inset;
    }
    /* Kurangi animasi untuk hemat baterai/ram */
    @media (prefers-reduced-motion: reduce){
      *{animation:none!important;transition:none!important;scroll-behavior:auto!important}
    }

    /* ===== Layout umum */
    .topbar{
      position:sticky;top:0;z-index:30;
      display:flex;align-items:center;gap:12px;
      height:56px;padding:0 14px;
      background:linear-gradient(180deg,#0c111b,#0a0f18);
      border-bottom:1px solid var(--border);
      backdrop-filter:saturate(120%) blur(6px);
    }
    .title{font-weight:700;letter-spacing:.2px}
    .grow{flex:1}
    .btn{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:14px;border:1px solid var(--border);
      background:var(--card);box-shadow:var(--shadow);cursor:pointer;
    }
    .btn:active{transform:translateY(1px)}
    .btn.ghost{background:transparent}
    .icon{width:20px;height:20px;display:inline-block}

    .app{
      min-height:calc(100dvh - 56px);
      padding:16px;
      display:flex;flex-direction:column;gap:16px;
    }

    /* ===== Drawer */
    .drawer{position:fixed;inset:0 auto 0 0;z-index:40;width:min(78%,320px);
      background:var(--card-2);border-right:1px solid var(--border);
      transform:translateX(-100%);transition:transform .18s ease-out;
      will-change:transform;contain:paint; /* hemat layout */
    }
    .drawer.open{transform:translateX(0)}
    .drawer .brand{display:flex;align-items:center;gap:10px;padding:16px;border-bottom:1px solid var(--border)}
    .drawer nav{padding:8px}
    .nav-item{
      display:flex;align-items:center;gap:12px;
      padding:12px 14px;border-radius:12px;
      border:1px solid transparent;color:#d7e1ec;
    }
    .nav-item:hover{background:#0f1622}
    .nav-item.active{border-color:#223047;background:#0e1420}
    .drawer-footer{margin-top:auto;padding:12px 14px;color:var(--muted);font-size:.9rem;border-top:1px solid var(--border)}

    .backdrop{position:fixed;inset:0;z-index:35;background:rgba(0,0,0,.48);
      opacity:0;pointer-events:none;transition:opacity .18s ease-out}
    .backdrop.show{opacity:1;pointer-events:auto}

    /* ===== Cards & grid */
    .grid{display:grid;gap:12px;grid-template-columns:repeat(2,minmax(0,1fr))}
    @media (max-width:520px){.grid{grid-template-columns:1fr}}
    .card{
      background:var(--card);border:1px solid var(--border);border-radius:var(--radius);
      box-shadow:var(--shadow);padding:14px;display:flex;flex-direction:column;gap:10px;
    }
    .card h3{margin:0 0 6px 0;font-size:1rem}
    .muted{color:var(--muted);font-size:.95rem}
    .badge{display:inline-block;padding:2px 8px;border-radius:999px;background:#0e1a26;border:1px solid var(--border);font-size:.78rem}
    .kpi{font-weight:700;font-size:1.25rem}

    /* ===== Pages */
    .page{display:none;animation:fade .18s ease-out}
    .page.show{display:block}
    @keyframes fade{from{opacity:.001;transform:translateY(4px)}to{opacity:1;transform:none}}

    /* ===== Forms (ringan) */
    .field{display:flex;flex-direction:column;gap:6px}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    input[type="text"], input[type="search"], input[type="number"], textarea, select{
      width:100%;padding:12px 12px;border-radius:12px;background:#0f1622;border:1px solid var(--border);color:var(--text);
    }
    .chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#0f1622}
    .list{display:flex;flex-direction:column;border:1px solid var(--border);border-radius:14px;overflow:hidden}
    .list .item{display:flex;align-items:center;gap:10px;justify-content:space-between;padding:12px 12px;background:#0e1420;border-bottom:1px solid var(--border)}
    .list .item:last-child{border-bottom:none}
    .btn.small{padding:8px 10px;border-radius:10px}
    .btn.ok{background:#0d1f18;border-color:#144d3b}
    .btn.warn{background:#24190e;border-color:#6a4a1a}
    .btn.bad{background:#2a1212;border-color:#6b2323}

    /* Footer */
    .footer{margin-top:auto;color:var(--muted);font-size:.85rem;padding:8px;text-align:center;opacity:.9}
  </style>
</head>
<body>
  <!-- Topbar -->
  <header class="topbar" role="banner">
    <button id="menuBtn" class="btn" aria-label="Buka menu" title="Menu">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
        <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/>
      </svg>
      <span>Menu</span>
    </button>
    <div class="title">GxMods Admin</div>
    <div class="grow"></div>
    <button id="refreshBtn" class="btn ghost" title="Segarkan">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline>
        <path d="M3.51 9a9 9 0 0114.13-3.36L23 10M1 14l5.36 4.36A9 9 0 0020.49 15"></path>
      </svg>
    </button>
  </header>

  <!-- Drawer -->
  <aside class="drawer" id="drawer" aria-hidden="true">
    <div class="brand">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><rect x="3" y="3" width="18" height="18" rx="4"/><path d="M7 7h10v10H7z"/></svg>
      <strong>Menu</strong>
    </div>
    <nav>
      <a class="nav-item active" href="#dashboard" data-route="dashboard">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M3 11l9-8 9 8"/><path d="M9 22V12h6v10"/></svg>
        <span>Dashboard</span>
      </a>
      <a class="nav-item" href="#keys" data-route="keys">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect x="3" y="5" width="18" height="14" rx="2"/><path d="M7 12h10M7 9h6M7 15h6"/></svg>
        <span>Daftar Key</span>
      </a>
      <a class="nav-item" href="#settings" data-route="settings">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 01-2.83 2.83l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09a1.65 1.65 0 00-1-1.51 1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09a1.65 1.65 0 001.51-1 1.65 1.65 0 00-.33-1.82l-.06-.06A2 2 0 016.04 3.2l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V2a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06A2 2 0 0120.8 6.04l-.06.06a1.65 1.65 0 00-.33 1.82V9c0 .68.39 1.3 1 1.6.63.31 1.02.94 1.02 1.65s-.39 1.34-1.02 1.65c-.61.3-1 .92-1 1.6z"/></svg>
        <span>Pengaturan</span>
      </a>
      <a class="nav-item" href="#about" data-route="about">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
        <span>Tentang</span>
      </a>
    </nav>
    <div class="drawer-footer">v1.0 • Ringan untuk RAM 2 GB</div>
  </aside>
  <div class="backdrop" id="backdrop" aria-hidden="true"></div>

  <!-- App -->
  <main class="app" id="app">
    <!-- Dashboard -->
    <section class="page show" data-page="dashboard" aria-labelledby="dash-h">
      <h2 id="dash-h" class="visually-hidden">Dashboard</h2>
      <div class="grid">
        <div class="card">
          <h3>Status Bot</h3>
          <div class="row" style="align-items:center;justify-content:space-between">
            <span class="badge">Online</span>
            <span class="kpi" id="kpi-active">0</span>
          </div>
          <p class="muted">Jumlah topik yang dipantau saat ini.</p>
          <div class="row">
            <button class="btn ok small" id="btnStart">Start</button>
            <button class="btn bad small" id="btnStop">Stop</button>
            <button class="btn small" id="btnRestart">Restart</button>
          </div>
        </div>
        <div class="card">
          <h3>Ringkasan</h3>
          <div class="row" style="gap:10px;flex-wrap:wrap">
            <div class="chip">Key aktif: <strong id="kpi-keys">0</strong></div>
            <div class="chip">Percobaan hari ini: <strong id="kpi-attempt">0</strong></div>
            <div class="chip">Versi config: <strong>1.0</strong></div>
          </div>
          <p class="muted">Angka ini hanya contoh; koneksikan ke backend Anda untuk data asli.</p>
        </div>
      </div>

      <div class="card">
        <h3>Log Singkat</h3>
        <div id="log" style="font-family:ui-monospace,Menlo,Consolas,monospace;white-space:pre-wrap;max-height:28vh;overflow:auto;border:1px solid var(--border);border-radius:12px;padding:10px;background:#0c131e"></div>
      </div>
    </section>

    <!-- Daftar Key -->
    <section class="page" data-page="keys" aria-labelledby="keys-h">
      <h2 id="keys-h" class="visually-hidden">Daftar Key</h2>
      <div class="card">
        <h3>Kelola Key</h3>
        <div class="row">
          <div class="field" style="flex:2;min-width:200px">
            <label for="keyInput" class="muted">Key</label>
            <input id="keyInput" type="text" inputmode="text" autocomplete="off" placeholder="ABCD-1234-XXXX" />
          </div>
          <div class="field" style="flex:1;min-width:140px">
            <label for="idInput" class="muted">ID (opsional)</label>
            <input id="idInput" type="text" inputmode="text" autocomplete="off" placeholder="a1b2c3..." />
          </div>
        </div>
        <div class="row">
          <button id="btnAdd" class="btn ok">Tambah</button>
          <button id="btnClear" class="btn warn">Bersihkan Semua</button>
          <div class="grow"></div>
          <input id="search" class="chip" type="search" placeholder="Cari key..." style="min-width:160px"/>
        </div>
      </div>

      <div class="list" id="keyList" role="list" aria-live="polite"></div>

      <div class="footer">Data key disimpan di <em>localStorage</em> perangkat ini. Integrasikan dengan API Anda untuk produksi.</div>
    </section>

    <!-- Settings -->
    <section class="page" data-page="settings" aria-labelledby="set-h">
      <h2 id="set-h" class="visually-hidden">Pengaturan</h2>
      <div class="card">
        <h3>Tampilan</h3>
        <div class="row">
          <label class="chip"><input id="reduceMotion" type="checkbox" /> Kurangi animasi</label>
          <label class="chip"><input id="denseList" type="checkbox" /> List rapat</label>
        </div>
        <p class="muted">Opsi ini membantu perangkat RAM kecil tetap mulus.</p>
      </div>

      <div class="card">
        <h3>Sinkronisasi</h3>
        <div class="row">
          <button class="btn small" id="btnExport">Export JSON</button>
          <input type="file" id="fileImport" accept="application/json" style="display:none" />
          <button class="btn small" id="btnImport">Import JSON</button>
        </div>
        <p class="muted">Format: [{"key":"ABCD-1234-XXXX","id":"optional"}]</p>
      </div>
    </section>

    <!-- About -->
    <section class="page" data-page="about">
      <div class="card">
        <h3>Tentang</h3>
        <p class="muted">UI ini dirancang mobile-first, drawer menu, dan "Daftar Key" dipisah dari Dashboard.
          Semua vanilla HTML/CSS/JS, tanpa framework, supaya enteng buat RAM 2 GB.</p>
      </div>
    </section>
  </main>

  <script>
    // ===== Util hemat: q / qa
    const q = (s, el=document) => el.querySelector(s);
    const qa = (s, el=document) => el.querySelectorAll(s);

    // ===== Drawer
    const drawer = q('#drawer');
    const menuBtn = q('#menuBtn');
    const backdrop = q('#backdrop');
    const openMenu = () => { drawer.classList.add('open'); backdrop.classList.add('show'); document.body.classList.add('menu-open'); drawer.setAttribute('aria-hidden','false'); };
    const closeMenu = () => { drawer.classList.remove('open'); backdrop.classList.remove('show'); document.body.classList.remove('menu-open'); drawer.setAttribute('aria-hidden','true'); };
    menuBtn.addEventListener('click', openMenu, {passive:true});
    backdrop.addEventListener('click', closeMenu, {passive:true});

    // Swipe to close (simple, cheap)
    let startX=null;
    drawer.addEventListener('touchstart',e=>{startX=e.touches[0].clientX},{passive:true});
    drawer.addEventListener('touchmove',e=>{
      if(startX===null) return;
      const dx=e.touches[0].clientX-startX;
      if(dx<-42) closeMenu();
    },{passive:true});

    // ===== Routing (SPA ringan)
    const pages = qa('.page');
    const navItems = qa('.nav-item');
    function showPage(name){
      pages.forEach(p=>p.classList.toggle('show', p.dataset.page===name));
      navItems.forEach(a=>a.classList.toggle('active', a.dataset.route===name));
      closeMenu();
      // focus management for a11y (cheap)
      const active = q('.page.show'); if(active) active.setAttribute('tabindex','-1'), active.focus({preventScroll:true});
      // Save route
      localStorage.setItem('gx:route', name);
    }
    navItems.forEach(a=>a.addEventListener('click', e=>{e.preventDefault(); showPage(a.dataset.route);}));
    // Restore route
    showPage(localStorage.getItem('gx:route') || 'dashboard');

    // ===== Dashboard dummy
    const kpiActive = q('#kpi-active');
    const kpiKeys = q('#kpi-keys');
    const kpiAttempt = q('#kpi-attempt');
    const log = q('#log');
    function pushLog(line){
      const t=new Date().toLocaleTimeString();
      log.textContent += `[${t}] ${line}\n`;
      log.scrollTop = log.scrollHeight;
    }
    q('#btnStart').addEventListener('click', ()=>pushLog('Bot start (dummy).'), {passive:true});
    q('#btnStop').addEventListener('click', ()=>pushLog('Bot stop (dummy).'), {passive:true});
    q('#btnRestart').addEventListener('click', ()=>pushLog('Bot restart (dummy).'), {passive:true});

    // ===== Key store (localStorage)
    const KEY_STORE = 'gx:keys:v1';
    const denseToggle = q('#denseList');
    const reduceToggle = q('#reduceMotion');
    let keys = [];
    try { keys = JSON.parse(localStorage.getItem(KEY_STORE) || '[]'); } catch { keys = []; }
    function saveKeys(){ localStorage.setItem(KEY_STORE, JSON.stringify(keys)); kpiKeys.textContent = String(keys.length); }
    function renderKeys(filter=''){
      const list = q('#keyList');
      list.innerHTML='';
      const frag = document.createDocumentFragment();
      const low = filter.toLowerCase();
      let count = 0;
      for(const it of keys){
        if(low && !(it.key?.toLowerCase().includes(low) || (it.id||'').toLowerCase().includes(low))) continue;
        const row = document.createElement('div');
        row.className = 'item';
        if(denseToggle.checked) row.style.padding = '8px 10px';
        const left = document.createElement('div');
        left.style.display='grid';
        left.style.gap='4px';
        left.innerHTML = `<strong>${(it.key||'–')}</strong><span class="muted" style="font-size:.85rem">ID: ${(it.id||'—')}</span>`;
        const right = document.createElement('div');
        const del = document.createElement('button');
        del.className='btn bad small'; del.textContent='Hapus';
        del.addEventListener('click', ()=>{
          const idx = keys.indexOf(it);
          if(idx>-1){ keys.splice(idx,1); saveKeys(); renderKeys(q('#search').value); pushLog('Key dihapus.'); }
        }, {passive:true});
        right.appendChild(del);
        row.appendChild(left); row.appendChild(right);
        frag.appendChild(row);
        count++;
      }
      list.appendChild(frag);
      if(count===0){
        const empty = document.createElement('div');
        empty.className='item'; empty.innerHTML = '<span class="muted">Belum ada data.</span>';
        list.appendChild(empty);
      }
    }
    renderKeys();

    // Tambah & clear
    q('#btnAdd').addEventListener('click', ()=>{
      const key = q('#keyInput').value.trim();
      const id = q('#idInput').value.trim();
      if(!key){ pushLog('Key kosong, batal.'); return; }
      keys.unshift({key, ...(id?{id}:{} )});
      q('#keyInput').value=''; q('#idInput').value='';
      saveKeys(); renderKeys(q('#search').value);
      pushLog('Key ditambahkan.');
    });
    q('#btnClear').addEventListener('click', ()=>{
      if(!confirm('Hapus semua key?')) return;
      keys.length=0; saveKeys(); renderKeys(); pushLog('Semua key dibersihkan.');
    });
    q('#search').addEventListener('input', e=>renderKeys(e.target.value), {passive:true});

    // KPI dummy naik turun tipis agar hidup
    setInterval(()=>{
      const n = Math.max(0, Number(kpiActive.textContent)||0);
      kpiActive.textContent = String(Math.max(0, n + (Math.random()>.5?1:-1)));
      kpiAttempt.textContent = String((Number(kpiAttempt.textContent)||0) + (Math.random()>.5?1:0));
    }, 2500);

    // ===== Settings
    denseToggle.addEventListener('change', ()=>renderKeys(q('#search').value), {passive:true});
    reduceToggle.addEventListener('change', ()=>{
      document.documentElement.style.scrollBehavior = reduceToggle.checked ? 'auto' : 'smooth';
    }, {passive:true});

    // ===== Export / Import
    q('#btnExport').addEventListener('click', ()=>{
      const blob = new Blob([JSON.stringify(keys,null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = Object.assign(document.createElement('a'), {href:url, download:'keys.json'});
      document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });
    q('#btnImport').addEventListener('click', ()=>q('#fileImport').click());
    q('#fileImport').addEventListener('change', async (e)=>{
      const file = e.target.files?.[0]; if(!file) return;
      try{
        const text = await file.text();
        const arr = JSON.parse(text);
        if(Array.isArray(arr)){
          keys = arr.filter(x=>x && typeof x==='object' && x.key);
          saveKeys(); renderKeys(); pushLog('Import sukses.');
        }else{ alert('Format tidak valid.'); }
      }catch{ alert('Gagal membaca file.'); }
      e.target.value='';
    });

    // ===== Restore flags
    if(localStorage.getItem('gx:reduce')==='1'){ reduceToggle.checked=true; }
    if(localStorage.getItem('gx:dense')==='1'){ denseToggle.checked=true; }
    reduceToggle.addEventListener('change',()=>localStorage.setItem('gx:reduce', reduceToggle.checked?'1':'0'));
    denseToggle.addEventListener('change',()=>localStorage.setItem('gx:dense', denseToggle.checked?'1':'0'));

    // ===== Misc: refresh dummy
    q('#refreshBtn').addEventListener('click', ()=>pushLog('Refresh UI.'), {passive:true});
  </script>

  <style>
    /* Kecilkan aksesibilitas visual helper */
    .visually-hidden{
      position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap
    }
  </style>
</body>
</html>
